//languages = ["Afar", "Abkhaz", "Abenaki", "Abaza", "Ambonese", "Acehnese", "Amdo Tibetan", "Adyghe", "Adyghe in Cyrillic script", "Tunisian Arabic", "Tunisian Arabic in Arabic script", "Tunisian Arabic in Latin script", "Afrikaans", "Aghem", "Akan", "Aklan", "Alabama", "Gheg Albanian", "Swiss German", "Altai", "Amharic", "Amis", "Aragonese", "Old English", "Angika", "Pemon", "Arabic", "Aramaic", "Mapudungun", "Algerian Arabic", "Moroccan Arabic", "Egyptian Arabic", "Assamese", "American Sign Language", "Asturian", "Atikamekw", "Avaric", "Kotava", "Awadhi", "Aymara", "Azerbaijani", "Azerbaijani in Cyrillic", "South Azerbaijani", "Bashkir", "Balinese", "Balinese in Balinese script", "Bavarian", "Samogitian", "Toba Batak", "Batak Toba in Latin script", "Southern Balochi", "Central Bikol", "West Coast Bajau", "Belarusian", "Taraškievica", "Beja", "British Sign Language", "Badaga", "Bulgarian", "Western Balochi", "Bhojpuri", "Bislama", "Banjar", "Blackfoot", "Bambara", "Bengali", "Bunun", "Tibetan", "Bishnupriya Manipuri", "Bakhtiari", "Breton", "Brahui language", "Bodo", "Bosnian", "Burushaski", "Kose", "Mandailing", "Rinconada Bikol", "Buginese", "Buryat", "Russia Buriat", "Basay", "Babuza", "Brazilian Sign Language", "Catalan", "Kaqchikel", "Carolinian", "Chavacano", "Zamboanga Chavacano", "Chakma", "Chakma in Bengali script", "Min Dong", "Chechen", "Cebuano", "Chamorro", "Chinook Jargon", "Choctaw", "Cherokee", "Cheyenne", "Sorani", "Chukchi", "Kavalan", "Chilcotin", "Hakha - Chin", "Montenegrin", "Corsican", "Coptic", "Capiznon", "Pu - Xian Min", "Cree", "Crimean Tatar", "Crimean Tatar in Cyrillic", "Crimean Tatar in Latin script", "Northern East Cree", "Seychellois Creole", "Czech", "Kashubian", "Chittagonian", "Church Slavonic", "Old Church Slavonic", "Chuvash", "Welsh", "Danish", "Dagbani", "Dargwa", "German", "Austrian German", "Swiss High German", "formal address in German", "Dinka", "Zazaki", "Dalmatian", "Rukai", "Lower Sorbian", "Kadazandusun", "Doteli", "Duala", "Dhivehi", "Dzongkha", "Ewe", "Emilian", "Greek", "Modern Greek", "Emilian - Romagnol", "English", "Canadian English", "British English", "Simple English", "American English", "Middle English", "Esperanto", "System H", "System X", "Spanish", "Latin American Spanish", "formal Spanish", "Central Alaskan Yup'ik", "Estonian", "Etruscan", "Basque", "Extremaduran", "Eyak", "Persian", "Dari", "Fula", "Finnish", "Meänkieli", "Võro", "Fijian", "Kven", "Faroese", "Fon", "Siraya", "French", "Canadian French", "Louisiana French", "Middle French", "Old French", "Arpitan", "North Frisian", "Pular", "Friulian", "West Frisian", "Irish", "Ga", "Gagauz", "Gan", "simplified Gan", "traditional Gan", "Guadeloupe-Martinique Creole French", "Guianan Creole", "Scottish Gaelic", "Ge'ez", "Gilbertese", "Medieval Greek", "Galician", "Gilaki", "Middle High German", "Middle Low German", "Guarani", "Old High German", "Goan Konkani", "Goan Konkani in Devanagari script", "Goan Konkani in Latin script", "Gorontalo", "Gothic", "Ancient Greek", "German Sign Language", "Alemannic", "Alsatian", "Gujarati", "Wayuu", "Gun", "Manx", "Hausa", "Haida", "Hakka", "Hawaiian", "Biblical Hebrew", "Hebrew", "Hindi", "Fiji Hindi", "Fiji Hindi in Latin script", "Hiligaynon", "Hiri Motu", "Ho", "Croatian", "Hunsrik", "Upper Sorbian", "Haitian Creole", "Hungarian", "formal Hungarian", "Armenian", "Western Armenian", "Herero", "Interlingua", "Indonesian", "Interlingue", "Igbo", "Nuosu", "Inupiat", "Eastern Canadian(Aboriginal syllabics)", "Eastern Canadian in Latin script", "Ilocano", "Ingush", "Indian Sign Language", "Ido", "Icelandic", "Italian", "Inuktitut", "Japanese", "Japanese written in kanji", "Japanese written in hiragana", "Japanese written in kana", "Japanese written in katakana", "Jamaican Creole", "Jambi Malay", "Lojban", "Jutlandic", "Javanese", "Georgian", "Karakalpak", "Kabyle", "Ketagalan", "Kabardian", "Kabardian in Cyrillic script", "Khamba", "Kabiye", "Tyap", "Cape Verdean Creole", "Kongo", "Khasi", "Khams Tibetan", "Khowar", "Gikuyu", "Kirmanjki", "Kwanyama", "Khakas", "Eastern Pwo", "Kazakh", "Kazakh in Arabic script", "Kazakh in China", "Kazakh in Cyrillic script", "Kazakh in Kazakhstan", "Kazakh in Latin script", "Kazakh in Turkey", "Greenlandic", "Khmer", "Kannada", "Korean", "North Korean standard language", "South Korean standard language", "Permyak", "Koyukon", "Kanuri", "Karachay - Balkar", "Krio", "Kinaray - a", "Karelian", "Karon", "Kashmiri", "Kashmiri in Arabic script", "Kashmiri in Devanagari script", "Kölsch", "Ripuarian", "S'gaw Karen", "Kurmanji", "Kurdish", "Kurdish in Arabic script", "Kurdish in Latin script", "Kumyk", "Kutenai", "Komi", "Cornish", "Kyrgyz", "Kyrgyz in Arabic script", "Kyrgyz in Cyrillic script", "Latin", "Judaeo-Spanish", "Rangi", "Luxembourgish", "Lak", "Lezgian", "Lingua Franca Nova", "Luganda", "Limburgish", "Ligurian", "Monégasque", "Livonian", "Laki", "Lakota", "Ladin", "Lombard", "Lingala", "Lao", "Lozi", "Northern Luri", "Lithuanian", "Latgalian", "Mizo", "Southern Luri", "Latvian", "Classical Chinese", "Laz", "Madurese", "Maithili", "Banyumasan", "Moksha", "Mauritian Creole", "Malagasy", "Marshallese", "Meadow Mari", "Māori", "Mi'kmaq", "Minangkabau", "language without a specific language code", "Old Swedish", "Macedonian", "Malayalam", "Mongolian", "Manchu", "Meitei", "Mon", "Moldovan", "Innu - aimun", "Marathi", "Mara", "Hill Mari", "Malay", "Malay in Jawi script", "Maltese", "Musi language", "multiple languages", "Muscogee", "Mirandese", "Mentawai", "Burmese", "Erzya", "Mazanderani", "Nauruan", "Nahuatl", "Southern Min", ".missing[add]", "Neapolitan", "Bokmål", "Low German", "Dutch Low Saxon", "Nepali", "Newar", "Ndonga", "Nias", "Niuean", "Dutch", "Belgian Dutch", "informal Dutch", "Nynorsk", "Høgnorsk", "Norwegian", "Northern Thai", "Nogai", "Old Norse", "Novial", "N'Ko", "Southern Ndebele", "Guernésiais", "Jèrriais", "Norman", "Naskapi", "Northern Sotho", "Kombe", "Navajo", "Numidian", "Chewa", "Noongar", "Occitan", "Ojibwe", "Livvi-Karelian", "Oromo", "O'odham", "Odia", "Ossetian", "Osage", "Osage in Latin script", "Ottoman Turkish", "Old Turkic", "Elfdalian", "Eastern Punjabi", "Punjabi", "Pangasinan", "Kapampangan", "Papiamento", "Picard", "Pennsylvania German", "Plautdietsch", "Old Persian", "Palatinate German", "Pali", "Pitkern", "Pijin", "Pitjantjatjara", "Pökoot", "Polish", "Piedmontese", "Papuan Malay", "Western Punjabi", "Pontic Greek", "Papora - Hoanya", "Old Prussian", "Pashto", "Portuguese", "Portuguese Language Orthographic Agreement of 1990", "Brazilian Portuguese", "Paiwan", "katadrengan", "Puyuma", "Quechua", "K’iche’", "Kichwa", "Quenya", "Cook Islands Maori", "Réunion Creole", "Romagnol", "Tarifit", "Arakanese", "Rangpuri", "Romansh", "Putèr", "Rumantsch Grischun", "Surmiran", "Sursilvan", "Sutsilvan", "Vallader", "Carpathian Romani", "Finnish Kalo", "Romani", "Kirundi", "Romanian", "Tarantino", "Russian", "Siberian", "Rusyn", "Aromanian", "Megleno - Romanian", "Megleno - Romanian in Cyrillic script", "Megleno - Romanian in Latin script", "Kinyarwanda", "Marwari(India)", "Okinawan", "Sanskrit", "Sakha", "Santali", "Santali in Bengali script", "Sardinian", "Sicilian", "Scots", "Sindhi", "Sassarese", "Southern Kurdish", "Northern Sami", "Seri", "Koyraboro Senni", "Sango", "Serbo - Croatian", "Tashelhit", "Tachelhit in Latin script", "Tachelhit in Tifinagh script", "Shan", "Shawiya", "Shawiya in Latin script", "Sinhala", "Sidamo", "Kildin Sami", "Pite Sami", "Mapun", "Sindarin", "Ter Sami", "Ume Sami", "Slovak", "Saraiki", "Saraiki in Arabic script", "Slovene", "Silesian German", "Samoan", "Southern Sami", "Lule Sami", "Inari Sami", "Skolt Sami", "Shona", "Somali", "Southern Thai", "Albanian", "Serbian", "Serbian written in Cyrillic", "Serbian written in Latin script", "Sranan Tongo", "Sirionó", "Swazi", "Thao", "Sesotho", "Saterland Frisian", "Siberian Tatar", "Sundanese", "Sumerian in Latin script", "Swedish", "Swahili", "Saaroa", "Syriac", "Sylheti in Bengali - Assamese script", "Silesian", "Sakizaya", "Tamil", "Atayal", "Southern Tutchone", "Tulu", "Telugu", "Tetum", "Tajik", "Tajik in Cyrillic script", "Tajik in Latin script", "Thai", "Tigrinya", "Turkmen", "Tagalog", "Klingon", "Klingon in Okrand notation", "Klingon in pIqaD", "Tlingit", "Talysh", "Talysh in Cyrillic script", "Tswana", "Tongan", "Tok Pisin", "Turkish", "Turoyo", "Seediq", "Tsonga", "Tausug", "Tseku", "Tsou", "Tatar", "Tatar in Cyrillic script", "Tatar in Latin script", "Northern Tutchone", "Tumbuka", "Tuvaluan", "Tavoyan dialects", "Taivoan", "Twi", "Tahitian", "Tuvan", "Talossan", "Central Atlas Tamazight", "Udmurt", "Uyghur", "Uyghur in Arabic script", "Uyghur in Latin script", "Ukrainian", "Munsee", "undetermined language", "Urdu", "Pazeh", "Uzbek", "Uzbek in Cyrillic script", "Uzbek in Latin script", "Southern Uzbek", "Venda", "Venetian", "Veps", "Vietnamese", "West Flemish", "Main - Franconian", "Volapük", "Votic", "Walloon", "Wolaytta", "Waray", "Wakhi", "Wallisian", "Wolof", "Wu Chinese", "Wendat", "Vilamovian", "Kalmyk Oirat", "Xhosa", "Mingrelian", "Kanakanavu", "Punic", "Saisiyat", "Yaghnobi", "Yapese", "Yangben", "Yidgha", "Yiddish", "Yoruba", "Nenets", "Nheengatu", "Zhuang", "Zeelandic", "Standard Moroccan Berber", "Chinese", "Putonghua", "Simplified Chinese", "Traditional Chinese", "Chinese(Hong Kong)", "Chinese in Macau", "Malaysian Mandarin", "Singaporean Mandarin", "Taiwanese Mandarin", "National language of the Republic of China", "Yue Chinese", "Cantonese", "Zulu", "Zuni"];
//languagesCode = ["Q27811", "Q5111", "Q197936", "Q27567", "Q3124354", "Q27683", "Q56509", "Q27776", "Q64362980", "Q56240", "Q64362981", "Q64362982", "Q14196", "Q34737", "Q28026", "Q8773", "Q1815020", "Q181037", "Q387066", "Q1991779", "Q28244", "Q35132", "Q8765", "Q42365", "Q28378", "Q10729616", "Q13955", "Q28602", "Q33730", "Q56499", "Q56426", "Q29919", "Q29401", "Q14759", "Q29507", "Q56590", "Q29561", "Q1377116", "Q29579", "Q4627", "Q9292", "Q107549766", "Q3449805", "Q13389", "Q33070", "Q107530457", "Q29540", "Q213434", "Q33017", "Q64362983", "Q12634001", "Q33284", "Q2880037", "Q9091", "Q2087886", "Q33025", "Q33000", "Q33205", "Q7918", "Q12645561", "Q33268", "Q35452", "Q33151", "Q33060", "Q33243", "Q9610", "Q56505", "Q34271", "Q37059", "Q257829", "Q12107", "Q33202", "Q33223", "Q9303", "Q216286", "Q34806", "Q2891049", "Q12633026", "Q33190", "Q33120", "Q16116629", "Q716647", "Q716615", "Q3436689", "Q7026", "Q35115", "Q28427", "Q33281", "Q32174903", "Q32952", "Q107530840", "Q36455", "Q33350", "Q33239", "Q33262", "Q35173", "Q32979", "Q33388", "Q33265", "Q36811", "Q33170", "Q716627", "Q28535", "Q3250286", "Q8821", "Q33111", "Q36155", "Q2937525", "Q56583", "Q33390", "Q33357", "Q107557467", "Q107557485", "Q12642195", "Q34015", "Q9056", "Q33690", "Q33173", "Q33251", "Q35499", "Q33348", "Q9309", "Q9035", "Q32238", "Q32332", "Q188", "Q306626", "Q1366643", "Q64427341", "Q56466", "Q10199", "Q35527", "Q49232", "Q13286", "Q5317225", "Q18415595", "Q33013", "Q32656", "Q33081", "Q30005", "Q1057898", "Q9129", "Q36510", "Q242648", "Q1860", "Q44676", "Q7979", "Q21480034", "Q7976", "Q36395", "Q143", "Q3505590", "Q3497763", "Q1321", "Q56649449", "Q64427343", "Q21117", "Q9072", "Q35726", "Q8752", "Q30007", "Q27480", "Q9168", "Q178440", "Q33454", "Q1412", "Q13357", "Q32762", "Q33295", "Q165795", "Q25258", "Q33291", "Q716604", "Q150", "Q1450506", "Q3083213", "Q1473289", "Q35222", "Q15087", "Q28224", "Q3915357", "Q33441", "Q27175", "Q9142", "Q33287", "Q33457", "Q33475", "Q64427344", "Q64427346", "Q3006280", "Q1363072", "Q9314", "Q35667", "Q30898", "Q36387", "Q9307", "Q33657", "Q837985", "Q505674", "Q35876", "Q35218", "Q5575236", "Q64362984", "Q64362985", "Q2501174", "Q35722", "Q35497", "Q33282", "Q131339", "Q8786", "Q5137", "Q891085", "Q3111668", "Q12175", "Q56475", "Q33303", "Q33375", "Q33569", "Q1982248", "Q9288", "Q1568", "Q46728", "Q64362986", "Q35978", "Q33617", "Q33270", "Q6654", "Q304049", "Q13248", "Q33491", "Q9067", "Q64427347", "Q8785", "Q180945", "Q33315", "Q35934", "Q9240", "Q35850", "Q33578", "Q34235", "Q27183", "Q64427348", "Q64362987", "Q35936", "Q33509", "Q3306265", "Q35224", "Q294", "Q652", "Q29921", "Q5287", "Q53979504", "Q53979341", "Q53979345", "Q53979342", "Q35939", "Q3915769", "Q36350", "Q1340322", "Q33549", "Q8108", "Q33541", "Q35853", "Q2779411", "Q33522", "Q64362989", "Q12952626", "Q35475", "Q3912765", "Q35963", "Q33702", "Q33584", "Q56601", "Q938216", "Q33587", "Q6023868", "Q1405077", "Q33575", "Q5330390", "Q9252", "Q64362991", "Q64427349", "Q64362992", "Q64427350", "Q64362993", "Q64427352", "Q25355", "Q9205", "Q33673", "Q9176", "Q18784", "Q18795", "Q56318", "Q28304", "Q36094", "Q33714", "Q35744", "Q33720", "Q33557", "Q35704", "Q33552", "Q64362994", "Q64362995", "Q4624", "Q32145", "Q56410", "Q36163", "Q36368", "Q64362996", "Q64362997", "Q36209", "Q33434", "Q36126", "Q25289", "Q9255", "Q95397566", "Q94989582", "Q397", "Q36196", "Q584983", "Q9051", "Q36206", "Q31746", "Q146803", "Q33368", "Q102172", "Q36106", "Q56422", "Q33698", "Q56483", "Q33537", "Q36202", "Q33754", "Q36217", "Q9211", "Q33628", "Q19933293", "Q9083", "Q36212", "Q36147", "Q12952748", "Q9078", "Q37041", "Q1160372", "Q36213", "Q36109", "Q33219", "Q13343", "Q33661", "Q7930", "Q36280", "Q3906614", "Q36451", "Q13321", "Q13324", "Q22283016", "Q2417210", "Q9296", "Q36236", "Q9246", "Q33638", "Q33868", "Q13349", "Q36392", "Q13351", "Q1571", "Q4175893", "Q1776032", "Q9237", "Q107526440", "Q9166", "Q615660", "Q20923490", "Q523014", "Q13330", "Q13365", "Q9228", "Q29952", "Q13356", "Q13307", "Q13300", "Q36495", "Q107530761", "Q33845", "Q25167", "Q25433", "Q516137", "Q33823", "Q33979", "Q33900", "Q2407831", "Q33790", "Q7411", "Q1404296", "Q64427356", "Q25164", "Q1420587", "Q9043", "Q565110", "Q33871", "Q35505", "Q36738", "Q18546266", "Q36785", "Q56428", "Q56430", "Q33850", "Q1704302", "Q33890", "Q36459", "Q13310", "Q35761", "Q33273", "Q7049771", "Q14185", "Q33875", "Q36584", "Q33864", "Q2393095", "Q33810", "Q33968", "Q2600085", "Q107530022", "Q36730", "Q34988", "Q254950", "Q28164079", "Q58635", "Q33879", "Q36121", "Q33856", "Q34024", "Q22711", "Q1751432", "Q35225", "Q23014", "Q36727", "Q36554", "Q36699", "Q2982063", "Q36323", "Q809", "Q15085", "Q12473446", "Q1389492", "Q36748", "Q2094884", "Q35501", "Q58680", "Q5146", "Q1113432", "Q750553", "Q715755", "Q108340302", "Q716690", "Q5218", "Q36494", "Q1740805", "Q56383", "Q36745", "Q13198", "Q1641543", "Q34174", "Q3450749", "Q3241618", "Q13199", "Q688309", "Q688873", "Q690216", "Q688348", "Q688272", "Q690226", "Q5045611", "Q2093214", "Q13201", "Q33583", "Q7913", "Q695526", "Q7737", "Q1194341", "Q26245", "Q29316", "Q13358", "Q64362998", "Q64362999", "Q33573", "Q65455884", "Q34233", "Q11059", "Q34299", "Q33965", "Q107550055", "Q33976", "Q33973", "Q14549", "Q33997", "Q845441", "Q1496597", "Q33947", "Q36583", "Q35655", "Q33954", "Q9301", "Q34152", "Q64363000", "Q64363001", "Q56482", "Q33274", "Q64363002", "Q13267", "Q33786", "Q33656", "Q56314", "Q3287253", "Q56437", "Q36656", "Q56415", "Q9058", "Q33902", "Q64363003", "Q9063", "Q152965", "Q34011", "Q13293", "Q56322", "Q33462", "Q13271", "Q34004", "Q13275", "Q56508", "Q8748", "Q9299", "Q21161942", "Q21161949", "Q33989", "Q3027953", "Q34014", "Q676492", "Q34340", "Q27154", "Q4418344", "Q34002", "Q107549870", "Q9027", "Q7838", "Q716599", "Q33538", "Q107549714", "Q30319", "Q718269", "Q5885", "Q715766", "Q31091048", "Q34251", "Q8097", "Q34125", "Q9260", "Q64363004", "Q64363005", "Q9217", "Q34124", "Q9267", "Q34057", "Q10134", "Q107550949", "Q107550940", "Q27792", "Q34318", "Q107526557", "Q34137", "Q34094", "Q34159", "Q256", "Q34040", "Q716686", "Q34327", "Q34142", "Q11159532", "Q716681", "Q25285", "Q39132549", "Q39134544", "Q20822", "Q34138", "Q34055", "Q7689158", "Q1975271", "Q36850", "Q34128", "Q34119", "Q1063911", "Q49741", "Q13238", "Q13263", "Q22338135", "Q22338145", "Q8798", "Q56547", "Q22282914", "Q1617", "Q36435", "Q9264", "Q64363006", "Q64363007", "Q1066787", "Q32704", "Q32724", "Q32747", "Q9199", "Q100103", "Q497345", "Q36986", "Q32858", "Q34219", "Q36943", "Q34279", "Q34208", "Q36979", "Q34257", "Q34290", "Q3567223", "Q56485", "Q33634", "Q13218", "Q13359", "Q172244", "Q535958", "Q716695", "Q34247", "Q34029", "Q12953315", "Q34179", "Q8641", "Q34311", "Q36452", "Q34333", "Q13216", "Q237409", "Q7598268", "Q7850", "Q24841726", "Q13414913", "Q18130932", "Q100148307", "Q64427357", "Q13646143", "Q1048980", "Q4380827", "Q262828", "Q7033959", "Q9186", "Q10179", "Q10188"]

Country_Code = readTextFile("./docs/Country_Code.txt");
Country_Name = readTextFile("./docs/Country_Name.txt");
Language_Code = readTextFile("./docs/Language_Code.txt");
Language_Name = readTextFile("./docs/Language_Name.txt");

var select;
var sparqlQuery, endpointUrl;
var LanguageSelect, CountrySelect;
var WDJson;
function readTextFile(file)
{
    const splitLines = str => str.split(/\r?\n/);
    var allText;
    var rawFile = new XMLHttpRequest();
    rawFile.open("GET", file, false);
    rawFile.onreadystatechange = function ()
    {
        if(rawFile.readyState === 4)
        {
            if(rawFile.status === 200 || rawFile.status == 0)
            {
                allText = splitLines(rawFile.responseText);
                //console.log(allText.length);
            }
        }
    }
    rawFile.send(null);
    return allText;
}


function init_Tables() {
    LanguageSelect = document.getElementById("LanguageSelect");
    LanguageSelectClient = document.getElementById("LanguageSelectClient");
    CountrySelect = document.getElementById("CountrySelect");
    var opt;

    for (var i = 0; i < Country_Code.length; i++) {
        opt = document.createElement('option');

        opt.value = Country_Code[i];

        opt.innerHTML = Country_Name[i];


        CountrySelect.appendChild(opt);
    }
    for (var i = 0; i < Language_Code.length; i++) {
        opt = document.createElement('option');
    
        opt.value = Language_Code[i];

        opt.innerHTML = Language_Name[i];

        LanguageSelect.appendChild(opt);
        
    } 
    for (var i = 0; i < Language_Code.length; i++) {
        opt = document.createElement('option');
    
        opt.value = Language_Code[i];

        opt.innerHTML = Language_Name[i];

        LanguageSelectClient.appendChild(opt);
        
    }


}

function makeSPARQLQuery(endpointUrl, sparqlQuery, doneCallback) {
    var settings = {
        headers: { Accept: 'application/sparql-results+json' },
        data: { query: sparqlQuery }
    };
    return $.ajax(endpointUrl, settings).then(doneCallback);
}

function clickonGo(){
    resetWDTable();
    village = document.getElementById("village").value;
    osmApi(village,LanguageSelect.value,CountrySelect.value);
}

function osmApi(village,acceptLanguage,countryCode){
    $(document).ready(function(){
        $.getJSON("https://nominatim.openstreetmap.org/search.php?q="+ village+
         "&accept-language="+ acceptLanguage+ 
         "&countrycodes="+ countryCode+ 
         "&format=jsonv2&extratags=1&addressdetails=1", function(result){
          $.each(result, function(i, field){
            //console.log(field);
            readDataFromJson(field);
        });
      });
    });
}









//////////// for wikidata query.

function Clicked() {

    var word = document.getElementById("word");
    endpointUrl = 'https://query.wikidata.org/sparql';

    sparqlQuery = "SELECT DISTINCT * WHERE {\n" +
        "	VALUES ?word {'" + word.value + "'@en}\n" +
        "	?source dct:language wd:Q1860;\n" +
        "		wikibase:lemma ?sourceLemma;\n" +
        "		ontolex:lexicalForm ?form ;\n" +
        "		wikibase:lexicalCategory wd:Q1084 ;\n" +
        "		ontolex:sense [ wdt:P5137 ?sense ].\n" +
        "	?target dct:language wd:" + targetLang.value + ";\n" +
        "		wikibase:lemma ?targetLemma;\n" +
        "		ontolex:sense [ wdt:P5137 ?sense ].\n" +
        "	?form ontolex:representation ?word .\n" +
        "}\n" +
        "ORDER BY ASC(UCASE(str(?sourceLemma))) ";



    makeSPARQLQuery(endpointUrl, sparqlQuery, function (data) {
        console.log(data);
        console.log("test : ");
        console.log(data.results.bindings[0]["sense"]);
        WDJson = data;
        //alert(data.results.bindings[0].targetLemma.value);
        CreatTableWD(data);

    }
    ).catch(err => { alert("query not found"); });




    function CreatTableWD(data) {

        $.each(data.results.bindings, function (key, val) {
            var rowData ={};
            rowData["source"] =ToLink(val.source.value);
            rowData["sourceLemma"] = val.sourceLemma.value;
            rowData["form"] = ToLink(val.form.value);
            rowData["sense"] = ToLink(val.sense.value);
            rowData["target"] =ToLink(val.target.value);
            rowData["targetLemma"] =val.targetLemma.value;
            rowData["word"] = val.word.value;
            insertNewRcord(rowData,"WD_list","WDRows",false);
        });




        // $("#WD_list").find(".WDRows").remove();
        // $.each(data.results.bindings, function (key, val) {
        //     var item = "<tr class=\"WDRows\" id = \"RDB" + key + "\"> <td>" + ToLink(val.source.value) + "</td> <td>" + val.sourceLemma.value + "</td> <td>" + ToLink(val.form.value) + "</td><td>" + ToLink(val.sense.value) + "</td> <td>" + ToLink(val.target.value) + "</td><td>" + val.targetLemma.value + "</td><td>" + val.word.value + "</td><td><a style =\"margin: 3px\" class=\" btn btn-sm btn \" id=\"btn_Edit_DB\" onclick=\"\"> <i class = \"glyphicon glyphicon-pencil\"></i></a>"+"  </td></tr>";
        //     $("#WD_list").append(item);
        //     console.log();
        // });

    }


    function ToLink(str) {
        var linkStr = "<a href=\""+str+"\">" + str.slice(31) + "</a>";
        
        return linkStr;
    }
}

    